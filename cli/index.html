<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>flask-mongodb - Flask-MongoDB</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../stylesheet/extra.css" rel="stylesheet" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "flask-mongodb";
        var mkdocs_page_input_path = "cli.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Flask-MongoDB
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mongo/">The MongoDB Class</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Database Operations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../collections/">Models</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Data Validation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../serializers/">Serializing Data</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CLI Tool</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">flask-mongodb</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#create-model">create-model</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shift">shift</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#start-db">start-db</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#add-collections">add-collections</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#history">history</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#examine">examine</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#run">run</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">API Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Changelog</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Flask-MongoDB</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">CLI Tool</li>
      <li class="breadcrumb-item active">flask-mongodb</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/juanmanuel96/flask-mongodb/edit/master/docs/cli.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="the-cli-tool">The CLI Tool</h1>
<p>Flask-MongoDB comes with a CLI tool to run database operations which are very hard to run during application runtime. Some examples are creating a database and its collections, or updating a collection when a field is altered or created. To run the CLI tool, open your terminal and execute the <code>flask-mongodb</code> command.</p>
<h2 id="commands">Commands</h2>
<p>This section will describe all the command available with the CLI tool. Note that running the base command will print out the help guide, it is the same as using the --help flag.</p>
<p>The flask-mongodb is the main command for all other commands of the tool. Options available for this command: </p>
<ul>
<li>--version: Prints out the package version</li>
<li>--help: Prints out the help information</li>
</ul>
<h3 id="create-model">create-model</h3>
<p>This command will create a model file in the directory of your choosing. This command simply replaces the process of having to create manually each file or python package. Options for this command:</p>
<ul>
<li>--path: Path to where the file will be created, providing no path will create it in the location where the command is executed</li>
<li>--package: Creates a package</li>
</ul>
<h3 id="shift">shift</h3>
<p>The shift CLI group is used to generate database shift. In Flask-MongoDB database shifting is the concept of altering the database either by creating it or modifying an existing one. The CLI tool was born to satisfy this need of the package. This command cannot run alone on its own it has a set of subcommands that make the use of shifting possible.</p>
<h4 id="start-db">start-db</h4>
<p>This command creates databases to be used by your application. It should be ran once the databases have been defined in the configurations of the application. Models do not have to be created before hand to create the database, it would be ideal but not necessary. The <code>start-db</code> command has an option for specifying a model to be created.</p>
<p>Please note that with this package you can run your application without explicitly creating a database, but once you stop the application all data will be lost. This command must be run whenever a new model group has been created.</p>
<p>Options for this command:</p>
<ul>
<li>--all, -a: Creates all databases, avoid having to run the command database by database</li>
<li>--database, -d: Specify the database alias to be started, default is <code>main</code></li>
<li>--path, -p: Model path with dot notation</li>
<li>--help: Display help information</li>
</ul>
<h4 id="add-collections">add-collections</h4>
<p>This command will add new collections to your database after your model group has been created. Say you have a model group called <code>api.blog</code> with a model called <code>BlogPosts</code> where the author is a StringField. Then you wish to move the author data to another model called <code>Author</code>. Adding this new model would require a tense workaround. With the <code>add-collections</code> command, you will only have to define your model run the command. This command will add all new models to the database. </p>
<p>Options for this command:</p>
<ul>
<li>--database, -d: Specify the database to add the collections, default is <code>main</code></li>
<li>--help: Display help information</li>
</ul>
<h4 id="history">history</h4>
<p>This command will go through the <code>shift_hisotry</code> collection of the database and print the datetime and collection name that was shifted.</p>
<p>Options for this command:</p>
<ul>
<li>--database, -d: Specify the database to see the shift history, default is <code>main</code></li>
<li>--help: Display help information</li>
</ul>
<h4 id="examine">examine</h4>
<p>This command will compere a collection of the database current state, specifically the schema, with the collection model's schema. After the examination has been completed, the command will output detailing which collections of the current database will require shifting. The <code>examine</code> will look for new fields, field alterations (e.g. changing a StringField to an EnumField), and</p>
<p>Options for this command:</p>
<ul>
<li>--database, -d: Specify the database to do the examination, by default it is set to main</li>
<li>--collection, -c: Specify the collection name to examine</li>
<li>--help: Display help information</li>
</ul>
<h4 id="run">run</h4>
<p>The run command will execute the shifts necessary for the databases. Shifting does another examination before applying the shifts.</p>
<blockquote>
<p><strong>NOTE:</strong> When the schema of the collection and the model have not changed at all, the shifting tool will treat this as another necessary shift. If a collection does not have data, the shift tool will also assume a shift is necessary. Everytime a shift is run, a new entry in the database's shift history collection is inserted. Before running the <code>run</code> command, run the <code>examine</code> command first to see if a shift is necessary.</p>
</blockquote>
<p>Options for this command:</p>
<ul>
<li>--database, -d: Specify the database on which to run the shift, default is main</li>
<li>--collection, -c: Specify the collection to run the shift</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../serializers/" class="btn btn-neutral float-left" title="Serializing Data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../api/" class="btn btn-neutral float-right" title="API Reference">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/juanmanuel96/flask-mongodb" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../serializers/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../api/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
