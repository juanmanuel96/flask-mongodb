<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Serializing Data - Flask-MongoDB</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../stylesheet/extra.css" rel="stylesheet" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Serializing Data";
        var mkdocs_page_input_path = "serializers.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Flask-MongoDB
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mongo/">The MongoDB Class</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Database Operations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../collections/">Models</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Data Validation</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Serializing Data</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#serializer-class">Serializer class</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#csrf-support">CSRF Support</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serializer-meta-class">Serializer meta class</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fields">Fields</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#jsonfield">JSONField</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#validators">Validators</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#validation">Validation</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#modelserializer-class">ModelSerializer class</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CLI Tool</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">flask-mongodb</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">API Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Changelog</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Flask-MongoDB</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Data Validation</li>
      <li class="breadcrumb-item active">Serializing Data</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/juanmanuel96/flask-mongodb/edit/master/docs/serializers.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="serializers">Serializers</h1>
<p>Serializers are classes used to validate incoming data. It is implemented with WTForms. There are two types of serializers:</p>
<ul>
<li>Serializer</li>
<li>ModelSerializer</li>
</ul>
<h2 id="serializer-class">Serializer class</h2>
<p>This basic serializer class can work outside of the application context. In essence it accepts some incoming data and applies the values to each of the defined fields. The, you run the <code>is_valid</code> method to validate each of the fields. If any errors happen, you can see each of the errors with the <code>errors</code> attribute, which is a list of the errors. </p>
<p>The incoming data can be a dictionary where the keys are the fields and the values the values of the fields. This type of data MUST be passed to the serializer on initialization with the <code>data</code> parameter or as the first parameter value. If you wish to use the <code>POST</code> attribute from the request proxy from Flask, you can use it as well. However, you need to specify the keyword argument <code>formdata</code>. Know that you cannot use <code>data</code> and <code>formdata</code> at the same time, a <code>ValueError</code> will be raised.</p>
<h3 id="csrf-support">CSRF Support</h3>
<p>By default, the Serializer class does not implement CSRF. For validating data, this will most probably not be required. However, as menthoned above, the Serializer class inherits from the WTForms and CSRF can be implemented. This needs to be done manually.</p>
<h3 id="serializer-meta-class">Serializer meta class</h3>
<p>The Serializer has a metaclass, set by the <code>Meta</code> class attribute which exists to disable CSRF. The easiest way to enable CSRF is by inheriting the <code>SerializerMeta</code> class and create your own meta class.</p>
<h3 id="fields">Fields</h3>
<p>To add field to your Serializer, simply import the desired field from the wtfroms package and implement them the same way you would with a WTForms Form class.</p>
<h4 id="jsonfield">JSONField</h4>
<p>The JSONField class is a custom flask-mongodb field for implementing Serializers that require a JSON-like structure. It is very similar to the FormField class, except that it is somewhat modified for flask-mongodb Serializer class.</p>
<h4 id="validators">Validators</h4>
<p>Once again you can use wtforms validators on your fields. There is a custom validator called <code>AllowNull</code> for when a field requires data but a null value is allowed. </p>
<h4 id="validation">Validation</h4>
<p>When creating a custom validator in you Serializer class, use the same naming convention you would use in WTForms. If a validation error must be raised, use the <code>ValidationError</code> from WTForms.</p>
<h2 id="modelserializer-class">ModelSerializer class</h2>
<p>The ModelSerializer class expands the Serializer class to accept a collection model with the class attribute <code>serializer_model</code>. This class has two properties for accessing the model or the manager for easier DB operations.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../collections/" class="btn btn-neutral float-left" title="Models"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../cli/" class="btn btn-neutral float-right" title="flask-mongodb">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/juanmanuel96/flask-mongodb" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../collections/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cli/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
